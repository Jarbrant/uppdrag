<!-- ============================================================
     FIL: pages/party.html  (HEL FIL)
     AO 9/15 + AO 10/15 (PATCH) — Party page UI + koppling till src/party.js
     Mål: Demo-skattejakt kan starta och visa checkpoints (1..5) + poäng/XP
     Policy: UI-only, mobil-first, inga externa deps
============================================================ -->
<!doctype html>
<html lang="sv">
<head>
  <!-- ==========================================================
       BLOCK 1 — Meta + CSS
  =========================================================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skattjakt — Demo</title>
  <meta name="description" content="Demo-skattejakt med checkpoints." />
  <link rel="stylesheet" href="../styles/main.css" />
</head>

<body>
  <!-- ==========================================================
       BLOCK 2 — Skip link (A11y light)
  =========================================================== -->
  <a class="skipLink" href="#mainContent">Hoppa till innehåll</a> <!-- HOOK: skip-link -->

  <!-- ==========================================================
       BLOCK 3 — App Root
  =========================================================== -->
  <div id="app" class="app"> <!-- HOOK: app-root -->
    <!-- ========================================================
         BLOCK 4 — Header
    ========================================================= -->
    <header class="topbar">
      <div class="topbar__inner">
        <div class="row row--header">
          <button id="backBtn" class="btn btn-ghost btn--icon" type="button" aria-label="Tillbaka">
            ←
          </button>
          <!-- HOOK: back-button -->

          <div class="headerTitle">
            <div class="muted small">Skattjakt</div>
            <div id="partyName" class="headerName">—</div>
            <!-- HOOK: party-name -->
          </div>

          <div class="headerRight">
            <span id="stepPill" class="pill pill--level">Steg —/—</span>
            <!-- HOOK: step-pill -->
          </div>
        </div>
      </div>
    </header>

    <!-- ========================================================
         BLOCK 5 — Main
         KRAV: stepper + ledtråd + “Nästa”
    ========================================================= -->
    <main id="mainContent" class="main" role="main"> <!-- HOOK: main -->
      <div class="container">
        <!-- Stepper -->
        <section class="card card--list" aria-label="Checkpoints">
          <div class="listHead">
            <h1 class="h2">Checkpoints</h1>
            <p class="muted small">Följ ledtråden och gå vidare steg för steg.</p>
          </div>

          <div id="stepper" class="stepper" aria-label="Stegindikator">
            <!-- HOOK: stepper -->
            <!-- NOTE: party.js uppdaterar active/done, och kan köra även om pack har fler/färre -->
            <button class="stepDot is-active" type="button" data-step="1" aria-label="Steg 1">1</button>
            <button class="stepDot" type="button" data-step="2" aria-label="Steg 2">2</button>
            <button class="stepDot" type="button" data-step="3" aria-label="Steg 3">3</button>
            <button class="stepDot" type="button" data-step="4" aria-label="Steg 4">4</button>
            <button class="stepDot" type="button" data-step="5" aria-label="Steg 5">5</button>
          </div>
        </section>

        <!-- Clue card -->
        <section class="card card--mission" aria-label="Ledtråd">
          <div class="card__head">
            <div class="card__meta">
              <h2 class="card__title">Ledtråd</h2>
              <p id="clueText" class="card__desc muted">Laddar…</p>
              <!-- HOOK: clue-text -->
            </div>
            <div class="card__side">
              <span class="pill pill--difficulty" id="cluePill">checkpoint</span>
              <!-- HOOK: clue-pill -->
            </div>
          </div>
        </section>

        <div class="muted small footerNote">
          Skattjakt-demo. Progress sparas lokalt (poäng/XP/historik).
        </div>
      </div>
    </main>

    <!-- ========================================================
         BLOCK 6 — Sticky CTA
         KRAV: “Nästa”
         NOTE: Prev skapas av party.js om den saknas.
    ========================================================= -->
    <div class="ctaBar" role="region" aria-label="Åtgärder">
      <div class="ctaBar__inner">
        <button id="nextBtn" class="btn btn-primary" type="button">
          Nästa
        </button>
        <!-- HOOK: next-button -->
      </div>
    </div>
  </div>

  <!-- ==========================================================
       BLOCK 7 — Page-only inline styles
  =========================================================== -->
  <style>
    .row { display:flex; align-items:center; gap: var(--sp-3); }
    .row--header { width:100%; }
    .btn--icon { width:44px; padding: 10px 10px; }
    .headerTitle { flex: 1; min-width: 0; }
    .headerName { font-weight: 800; font-size: var(--fs-4); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .headerRight { display:flex; align-items:center; gap: var(--sp-2); }

    .pill { display:inline-flex; align-items:center; justify-content:center; padding: 7px 10px; border-radius: 999px; border: 1px solid var(--border); background: rgba(255,255,255,.06); font-weight: 800; font-size: var(--fs-1); }
    .pill--level { border-color: rgba(110,231,255,.30); background: rgba(110,231,255,.10); color: rgba(255,255,255,.92); }
    .pill--difficulty { border-color: rgba(255,255,255,.14); }

    .stepper {
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
      padding-top: var(--sp-2);
    }

    .stepDot {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      font-weight: 900;
      cursor: pointer;
      transition: transform .08s ease, border-color .12s ease, background .12s ease;
    }
    .stepDot:active { transform: translateY(1px); }
    .stepDot:hover { border-color: rgba(110,231,255,.25); background: rgba(255,255,255,.06); }
    .stepDot.is-active {
      border-color: rgba(110,231,255,.55);
      background: rgba(110,231,255,.10);
      box-shadow: var(--sh-1);
    }
    .stepDot.is-done {
      border-color: rgba(74,222,128,.35);
      background: rgba(74,222,128,.10);
    }

    .footerNote { margin-top: var(--sp-5); text-align:center; opacity:.85; }
    .ctaBar {
      position: sticky;
      bottom: 0; left:0; right:0;
      z-index: 20;
      padding: var(--sp-3) var(--sp-4);
      padding-bottom: calc(var(--sp-3) + env(safe-area-inset-bottom, 0px));
      background: rgba(5,10,20,.75);
      border-top: 1px solid var(--border);
      backdrop-filter: blur(10px);
    }
    .ctaBar__inner { max-width: var(--container); margin: 0 auto; display:flex; gap: var(--sp-2); }
    .ctaBar__inner .btn { flex: 1; }
  </style>

  <!-- ==========================================================
       BLOCK 8 — Script (KRAV: koppla riktig logic)
  =========================================================== -->
  <script type="module" src="../src/party.js"></script>
</body>
</html>
